/*! @baidu/h5-bot-sdk - 1.4.0 */
var BotApp=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="HVBj")}({"29s/":function(e,t,n){var r=n("WEpk"),i=n("5T2Y"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n("uOPS")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"2GTP":function(e,t,n){var r=n("eaoh");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},"2faE":function(e,t,n){var r=n("5K7Z"),i=n("eUtF"),o=n("G8Mo"),a=Object.defineProperty;t.f=n("jmDH")?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},"5K7Z":function(e,t,n){var r=n("93I4");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},"5T2Y":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"5vMV":function(e,t,n){var r=n("B+OT"),i=n("NsO/"),o=n("W070")(!1),a=n("VVlx")("IE_PROTO");e.exports=function(e,t){var n,u=i(e),c=0,s=[];for(n in u)n!=a&&r(u,n)&&s.push(n);for(;t.length>c;)r(u,n=t[c++])&&(~o(s,n)||s.push(n));return s}},"93I4":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"B+OT":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},D8kY:function(e,t,n){var r=n("Ojgd"),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},FpHa:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},G8Mo:function(e,t,n){var r=n("93I4");e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},GQeE:function(e,t,n){e.exports={default:n("iq4v"),__esModule:!0}},HVBj:function(e,t,n){"use strict";var r=c(n("GQeE")),i=c(n("QbLZ")),o=c(n("gDS+")),a=c(n("iCc5")),u=c(n("V7oC"));function c(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),this.config=t,this._init()}return(0,u.default)(e,[{key:"_init",value:function(){var e=this,t=(0,o.default)({random1:this.config.random1,signature1:this.config.signature1,random2:this.config.random2,signature2:this.config.signature2});this._postMessageTarget="https://xiaodu.baidu.com",this._getJSBridge(function(n){n.init(function(e,t){console.log("Receive bridge init message from native: "+e),t({"Javascript Responds":"Ready!"})}),n.callHandler("register",t,function(t){t=JSON.parse(t),e.registerResult=t,e.registerCallback&&e.registerCallback(t),e.registerCallback=null,e.config.skillID&&e.requireShipping()})}),this.isInApp()&&(this._createOAuthIframe(),window.addEventListener("message",function(t){if(console.log("dddd",t),t.origin===e._postMessageTarget){var n=t.data;console.log("receive message from iframe",n),"authorized_success"===n.type||"authorized_fail"===n.type?(e._linkAccountResultCb(n),e._hideOAuthIframe()):"bot_info"===n.type?(e.registerResult=n.data,e.registerCallback&&e.registerCallback(e.registerResult),e.registerCallback=null):"ship"===n.type&&e._getShipPayResult&&e._getShipPayResult(n.err,n.data)}}),window.addEventListener("popstate",function(t){t.state||(e._deleteOrderIframe(),e.oAuthIframeDOM.contentWindow.postMessage({type:"ship",data:(0,i.default)({},e._buyData)},e._postMessageTarget))}))}},{key:"_getJSBridge",value:function(e){window.WebViewJavascriptBridge?e(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){e(WebViewJavascriptBridge)},!1)}},{key:"_validateCallback",value:function(e,t){if("function"!=typeof t)throw new TypeError("["+e+"]'s arguments[0] must be a function, but get a "+typeof t)}},{key:"isInApp",value:function(){if(this._appType)return this._appType;var e=window.navigator.userAgent.toLowerCase(),t="";return e.match(/xiaoduapp\/([\S]+)/)?t="ls_m":e.match("fromapp/xiaoduapp")&&(t="oneApp"),this._appType="ls_m"===t||"oneApp"===t,this._appType}},{key:"_encodeQueryData",value:function(e){return e?(0,r.default)(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&"):""}},{key:"_createOAuthIframe",value:function(){if(this.oAuthIframeDOM)this.oAuthIframeDOM.style.display="block";else{var e={botId:this.config.skillID,random1:this.config.random1,signature1:this.config.signature1,random2:this.config.random2,signature2:this.config.signature2},t=this.oAuthIframeDOM=document.createElement("iframe");t.id="dueros_oauth_iframe",t.src="https://xiaodu.baidu.com/saiya/sdk/iframe/oauth.html?"+this._encodeQueryData(e),t.frameborder="no",t.scrolling="no";t.style.cssText="width: 100%;display: none;height: 100vh;position: fixed;left: 0;bottom: 0;z-index: 100;border: none;margin: 0;padding: none;",document.body.appendChild(t)}}},{key:"_createOrderIframe",value:function(e){if(this.orderIframeDOM)this.orderIframeDOM.src=e,document.body.appendChild(this.orderIframeDOM);else{var t=this.orderIframeDOM=document.createElement("iframe");t.id="dueros_order_iframe",t.src=e,t.frameborder="no",t.allowtransparency="yes",t.style.cssText="width: 100%;background-color: #fff;height: 100vh;position: fixed;left: 0;bottom: 0;z-index: 100;border: none;margin: 0;padding: none;",document.body.appendChild(t)}}},{key:"_showOAuthIframe",value:function(){this.oAuthIframeDOM.style.display="block",this._deleteOrderIframe()}},{key:"_routeOrderIframe",value:function(){window.history.pushState({showOrder:!0},"","dueros_order")}},{key:"_hideOAuthIframe",value:function(){this.oAuthIframeDOM.style.display="none"}},{key:"_deleteOrderIframe",value:function(){this.orderIframeDOM&&document.getElementById("dueros_order_iframe")&&document.body.removeChild(this.orderIframeDOM)}},{key:"requireShipping",value:function(){if(!this.config.skillID)throw new Error("Missing `skillID`, please configure `skillID` when initializes the `BotApp`");var e="http://"+this.config.skillID+'/path?openbot=true&request={"query":{"type":"TEXT","original":"ReadyForShipping","rewritten":"ReadyForShipping"},"dialogState":"COMPLETED","intents":[{"name":"ReadyForShipping","score":100,"confirmationStatus":"NONE","slots":[]}]}';this.uploadLinkClicked({url:e})}},{key:"getRegisterResult",value:function(e){this.registerResult?e(this.registerResult):this.registerCallback=e}},{key:"requireLinkAccount",value:function(e){this.isInApp()?(this._validateCallback("requireLinkAccount",e),this._showOAuthIframe(),this._linkAccountResultCb=e):(e&&console.warn("requireLinkAccount: Your H5 app is running on the `SHOW` device, and the callback function will not be called"),this._getJSBridge(function(e){e.callHandler("requireLinkAccount")}))}},{key:"onLinkAccountSuccess",value:function(e){this._validateCallback("onLinkAccountSuccess",e),this._getJSBridge(function(t){t.registerHandler("onLinkAccountSuccess",function(t,n){e(JSON.parse(t)),n(!0)})})}},{key:"requireCharge",value:function(e){e=(0,o.default)(e),this._getJSBridge(function(t){t.callHandler("requireCharge",e)})}},{key:"requireBuy",value:function(e,t){if(this.isInApp()){if(!e||!e.productId||!e.sellerOrderId){var n=new Error;throw n.name="params error",n.message="requireBuy: arguments[0] must be an `Object` with `productId` and `sellerOrderId`",n}this._getShipPayResult=t;var r=(0,i.default)({},e,{product2:e.productId+"|"+e.sellerOrderId+"|skillstoreapp"}),o="https://xiaodu.baidu.com/dbppay/skill-pay/product/buy?",a=o+=this._encodeQueryData(r);this._createOrderIframe(a),this._routeOrderIframe(),this._buyData=e}else console.error("Method `requireBuy` can only be called in App")}},{key:"uploadLinkClicked",value:function(e){e=(0,o.default)(e),this._getJSBridge(function(t){t.callHandler("uploadLinkClicked",e)})}},{key:"onChargeStatusChange",value:function(e){this._validateCallback("onChargeStatusChange",e),this._getJSBridge(function(t){t.registerHandler("onChargeStatusChange",function(t,n){e(JSON.parse(t)),n(!0)})})}},{key:"onHandleIntent",value:function(e){this._validateCallback("onHandleIntent",e),this._getJSBridge(function(t){t.registerHandler("onHandleIntent",function(t,n){e(JSON.parse(t)),n("js 回调")})})}},{key:"updateUiContext",value:function(e,t){t&&this._validateCallback("updateUiContext",t),e=(0,o.default)(e),this._getJSBridge(function(n){n.callHandler("updateUiContext",e,function(e){t&&t(e)})})}},{key:"listen",value:function(e){e&&this._validateCallback("listen",e),this._getJSBridge(function(t){t.callHandler("listen",function(t){e&&e(t)})})}},{key:"speak",value:function(e,t){t&&this._validateCallback("speak",t),this._getJSBridge(function(n){n.callHandler("speak",e,function(){t&&t()})})}},{key:"requestClose",value:function(){this._getJSBridge(function(e){e.callHandler("requestClose")})}},{key:"onClickLink",value:function(e){this._validateCallback("onClickLink",e),this._getJSBridge(function(t){t.registerHandler("onClickLink",function(t,n){e(JSON.parse(t)),n(!0)})})}},{key:"onHandleScreenNavigatorEvent",value:function(e){this._validateCallback("onHandleScreenNavigatorEvent",e),this._getJSBridge(function(t){t.registerHandler("onHandleScreenNavigatorEvent",function(t,n){e(JSON.parse(t)),n(!0)})})}}]),e}();e.exports=s},Hsns:function(e,t,n){var r=n("93I4"),i=n("5T2Y").document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},JB68:function(e,t,n){var r=n("Jes0");e.exports=function(e){return Object(r(e))}},Jes0:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},KUxP:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},M1xp:function(e,t,n){var r=n("a0xu");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},Mqbl:function(e,t,n){var r=n("JB68"),i=n("w6GO");n("zn7N")("keys",function(){return function(e){return i(r(e))}})},NV0k:function(e,t){t.f={}.propertyIsEnumerable},NegM:function(e,t,n){var r=n("2faE"),i=n("rr1i");e.exports=n("jmDH")?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},"NsO/":function(e,t,n){var r=n("M1xp"),i=n("Jes0");e.exports=function(e){return r(i(e))}},Ojgd:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},P2sY:function(e,t,n){e.exports={default:n("UbbE"),__esModule:!0}},QbLZ:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("P2sY"),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},"RU/L":function(e,t,n){n("Rqdy");var r=n("WEpk").Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},Rqdy:function(e,t,n){var r=n("Y7ZC");r(r.S+r.F*!n("jmDH"),"Object",{defineProperty:n("2faE").f})},SEkw:function(e,t,n){e.exports={default:n("RU/L"),__esModule:!0}},UbbE:function(e,t,n){n("o8NH"),e.exports=n("WEpk").Object.assign},V7oC:function(e,t,n){"use strict";t.__esModule=!0;var r,i=n("SEkw"),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},VVlx:function(e,t,n){var r=n("29s/")("keys"),i=n("YqAc");e.exports=function(e){return r[e]||(r[e]=i(e))}},W070:function(e,t,n){var r=n("NsO/"),i=n("tEej"),o=n("D8kY");e.exports=function(e){return function(t,n,a){var u,c=r(t),s=i(c.length),f=o(a,s);if(e&&n!=n){for(;s>f;)if((u=c[f++])!=u)return!0}else for(;s>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},WEpk:function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},Y7ZC:function(e,t,n){var r=n("5T2Y"),i=n("WEpk"),o=n("2GTP"),a=n("NegM"),u=n("B+OT"),c=function(e,t,n){var s,f,l,d=e&c.F,p=e&c.G,h=e&c.S,g=e&c.P,v=e&c.B,y=e&c.W,m=p?i:i[t]||(i[t]={}),b=m.prototype,_=p?r:h?r[t]:(r[t]||{}).prototype;for(s in p&&(n=t),n)(f=!d&&_&&void 0!==_[s])&&u(m,s)||(l=f?_[s]:n[s],m[s]=p&&"function"!=typeof _[s]?n[s]:v&&f?o(l,r):y&&_[s]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):g&&"function"==typeof l?o(Function.call,l):l,g&&((m.virtual||(m.virtual={}))[s]=l,e&c.R&&b&&!b[s]&&a(b,s,l)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},YqAc:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},a0xu:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},eUtF:function(e,t,n){e.exports=!n("jmDH")&&!n("KUxP")(function(){return 7!=Object.defineProperty(n("Hsns")("div"),"a",{get:function(){return 7}}).a})},eaoh:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"gDS+":function(e,t,n){e.exports={default:n("oh+g"),__esModule:!0}},iCc5:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},iq4v:function(e,t,n){n("Mqbl"),e.exports=n("WEpk").Object.keys},jmDH:function(e,t,n){e.exports=!n("KUxP")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},kwZ1:function(e,t,n){"use strict";var r=n("jmDH"),i=n("w6GO"),o=n("mqlF"),a=n("NV0k"),u=n("JB68"),c=n("M1xp"),s=Object.assign;e.exports=!s||n("KUxP")(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=s({},e)[n]||Object.keys(s({},t)).join("")!=r})?function(e,t){for(var n=u(e),s=arguments.length,f=1,l=o.f,d=a.f;s>f;)for(var p,h=c(arguments[f++]),g=l?i(h).concat(l(h)):i(h),v=g.length,y=0;v>y;)p=g[y++],r&&!d.call(h,p)||(n[p]=h[p]);return n}:s},mqlF:function(e,t){t.f=Object.getOwnPropertySymbols},o8NH:function(e,t,n){var r=n("Y7ZC");r(r.S+r.F,"Object",{assign:n("kwZ1")})},"oh+g":function(e,t,n){var r=n("WEpk"),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},rr1i:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},tEej:function(e,t,n){var r=n("Ojgd"),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},uOPS:function(e,t){e.exports=!0},w6GO:function(e,t,n){var r=n("5vMV"),i=n("FpHa");e.exports=Object.keys||function(e){return r(e,i)}},zn7N:function(e,t,n){var r=n("Y7ZC"),i=n("WEpk"),o=n("KUxP");e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}}});